<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DepositSafe | Dashboard</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="page">
    <!-- Sidebar Navigation -->
    <nav class="sidebar">
      <div class="sidebar-header">
        <h1 class="logo">DepositSafe</h1>
        <p class="logo-subtitle">Secure Escrow Platform</p>
      </div>
      
      <div class="sidebar-menu">
        <a href="dashboard.html" class="menu-item active" data-page="dashboard">
          <span class="menu-icon">üìä</span>
          <span>Dashboard</span>
        </a>
        <a href="history.html" class="menu-item" data-page="history">
          <span class="menu-icon">üìú</span>
          <span>History</span>
        </a>
        <a href="settings.html" class="menu-item" data-page="settings">
          <span class="menu-icon">‚öôÔ∏è</span>
          <span>Settings</span>
        </a>
        <a href="buy-xlusd.html" class="menu-item" data-page="buy">
          <span class="menu-icon">üí∞</span>
          <span>Buy XLUSD</span>
        </a>
        <a href="withdraw.html" class="menu-item" data-page="withdraw">
          <span class="menu-icon">üí∏</span>
          <span>Withdraw</span>
        </a>
        <a href="profile.html" class="menu-item" data-page="profile">
          <span class="menu-icon">üë§</span>
          <span>Profile</span>
        </a>
      </div>

      <div class="sidebar-footer">
        <div class="user-info">
          <div class="user-avatar">
            <span id="userInitial">U</span>
          </div>
          <div class="user-details">
            <div class="user-name" id="sidebarUser">Loading...</div>
            <div class="user-email" id="sidebarEmail">...</div>
          </div>
        </div>
        <a href="index.html" class="menu-item logout">
          <span class="menu-icon">üö™</span>
          <span>Log out</span>
        </a>
      </div>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
      <div class="topbar">
        <div>
          <h2>Dashboard Overview</h2>
          <p class="muted">Welcome back, <span id="who"></span></p>
        </div>
        <div class="topbar-actions">
          <div class="balance-display">
            <span class="balance-label">XLUSD Balance:</span>
            <span class="balance-value" id="xlusdBalance">Loading...</span>
          </div>
          <button id="btnBuyXLUSD" class="btn-buy">üí≥ Buy XLUSD</button>
        </div>
      </div>

      <!-- Statistics Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">üì¶</div>
          <div class="stat-content">
            <div class="stat-label">Total Escrows</div>
            <div class="stat-value" id="totalEscrows">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">üíµ</div>
          <div class="stat-content">
            <div class="stat-label">Total Value</div>
            <div class="stat-value" id="totalValue">0 XRP</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">‚úÖ</div>
          <div class="stat-content">
            <div class="stat-label">Completed</div>
            <div class="stat-value" id="completedCount">0</div>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">‚è≥</div>
          <div class="stat-content">
            <div class="stat-label">Pending</div>
            <div class="stat-value" id="pendingCount">0</div>
          </div>
        </div>
      </div>

      <!-- Recent Activity -->
      <div class="activity-card">
        <div class="card-header">
          <h3>Recent Activity</h3>
          <a href="history.html" class="view-all">View All ‚Üí</a>
        </div>
        <div class="activity-list" id="recentActivity">
          <div class="activity-empty">No recent activity</div>
        </div>
      </div>

      <div class="grid">
      <!-- Make Deposit -->
      <div class="card">
        <h3>Flow A ‚Äî Make Deposit (EscrowCreate)</h3>
        <p class="muted">Payer locks XRP into escrow for a payee.</p>

        <label>Payee XRPL Address</label>
        <input id="a_payee" placeholder="r..." />

        <label>Amount (XRP)</label>
        <input id="a_amount" type="number" step="0.000001" placeholder="10" />

        <label>Release time (FinishAfter)</label>
        <input id="a_finish" type="datetime-local" />

        <label>Cancel time (CancelAfter) ‚Äî optional</label>
        <input id="a_cancel" type="datetime-local" />

        <button id="btnCreate">Create Escrow</button>

        <div class="result" id="resCreate"></div>
      </div>

      <!-- Release -->
      <div class="card">
        <h3>Flow B ‚Äî Release Deposit (EscrowFinish)</h3>
        <p class="muted">Payee claims funds when FinishAfter passes.</p>

        <label>Escrow Owner (Payer address)</label>
        <input id="b_owner" placeholder="r..." />

        <label>Escrow Sequence</label>
        <input id="b_seq" type="number" placeholder="123" />

        <button id="btnFinish">Claim Deposit</button>

        <div class="result" id="resFinish"></div>
      </div>

      <!-- Cancel -->
      <div class="card">
        <h3>Flow C ‚Äî Cancel & Refund (EscrowCancel)</h3>
        <p class="muted">Payer cancels escrow after CancelAfter time.</p>

        <label>Escrow Owner (Payer address)</label>
        <input id="c_owner" placeholder="r..." />

        <label>Escrow Sequence</label>
        <input id="c_seq" type="number" placeholder="123" />

        <button id="btnCancel">Cancel & Refund</button>

        <div class="result" id="resCancel"></div>
      </div>
    </div>

    <script src="dashboard.js"></script>
  </body>
</html>
